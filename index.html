<!doctype html>
<html lang="pt-br" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Apresentador de Anatomia - Prof. Cl√°udia Pinheiro</title>
  
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
      color: #fff; overflow: hidden; height: 100vh;
    }
    .app-wrapper { display: flex; flex-direction: column; height: 100%; }
    .header { background: rgba(48, 43, 99, 0.8); padding: 1.2rem; border-bottom: 2px solid #64b5f6; text-align: center; }
    .content { flex: 1; display: flex; align-items: center; justify-content: center; padding: 20px; position: relative; }
    .slide-container { width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.2); border-radius: 20px; border: 1px solid rgba(100, 181, 246, 0.3); }
    .slide-image { max-width: 100%; max-height: 100%; object-fit: contain; border-radius: 10px; }
    .controls { display: flex; align-items: center; justify-content: center; gap: 2rem; padding: 1.5rem; background: rgba(48, 43, 99, 0.9); border-top: 2px solid #64b5f6; }
    .btn { background: #42a5f5; color: white; padding: 0.8rem 1.5rem; border-radius: 25px; font-weight: bold; cursor: pointer; border: none; transition: 0.3s; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
    .btn:hover { transform: translateY(-3px); background: #2196f3; }
    .notes-panel { position: fixed; right: -420px; top: 0; width: 420px; height: 100%; background: #1a1a2e; border-left: 2px solid #64b5f6; transition: 0.4s ease; z-index: 1000; display: flex; flex-direction: column; }
    .notes-panel.active { right: 0; }
    #notes-text { flex: 1; background: #0f0c29; color: #fff; padding: 20px; border: none; outline: none; resize: none; margin: 15px; border-radius: 10px; font-size: 1rem; border: 1px solid #333; }
    .progress-bar { width: 200px; height: 10px; background: rgba(255,255,255,0.1); border-radius: 5px; overflow: hidden; }
    .progress-fill { height: 100%; background: #ffc107; width: 0%; transition: 0.4s; }
    .btn-container { position: absolute; bottom: 30px; left: 30px; display: flex; gap: 12px; z-index: 100; flex-wrap: wrap; }
  </style>
</head>
<body>

  <div class="app-wrapper">
    <div class="header"><h1>Introdu√ß√£o √† Anatomia Humana</h1></div>
    <div class="content">
      <div class="slide-container" id="slide-container"></div>
      <div class="btn-container" id="dynamic-btns"></div>
    </div>
    <div class="controls">
      <button class="btn" onclick="previousSlide()">‚Üê Anterior</button>
      <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
      <div id="slide-num" style="font-weight:bold;">1 / 37</div>
      <button class="btn" style="background:#9c27b0" onclick="toggleNotes()">üìù Notas</button>
      <button class="btn" id="voice-btn" style="background:#ff9800" onclick="toggleVoice()">üé§ Voz</button>
      <button class="btn" onclick="nextSlide()">Pr√≥ximo ‚Üí</button>
    </div>
  </div>

  <div class="notes-panel" id="notes-panel">
    <div style="padding: 20px; border-bottom: 1px solid #64b5f6; display: flex; justify-content: space-between; align-items: center;">
      <h3>Notas - Slide <span id="note-num">1</span></h3>
      <button onclick="toggleNotes()" style="color:#64b5f6; background:none; border:none; cursor:pointer; font-size:1.5rem;">‚úï</button>
    </div>
    <textarea id="notes-text" placeholder="Escreva suas observa√ß√µes ou extraia o texto do slide..."></textarea>
    <div style="padding: 15px; display: flex; gap: 8px; flex-wrap: wrap;">
      <button class="btn" style="flex:1; font-size:0.8rem;" onclick="extractText()">üìÑ Extrair Texto</button>
      <button class="btn" style="flex:1; font-size:0.8rem; background:#4caf50;" onclick="downloadPDF()">üì• Baixar PDF</button>
      <button class="btn" style="flex:1; font-size:0.8rem; background:#f44336;" onclick="clearNotes()">üóëÔ∏è Limpar</button>
    </div>
  </div>

  <script>
    let currentSlide = 1;
    const totalSlides = 37;
    let voiceActive = false;
    let recognition = null;

    const slideData = {
      1: { text: "Introdu√ß√£o a Anatomia humana. Professora: Claudia Pinheiro.", links: [{ label: "üìÖ Cronograma", url: "https://pinheiro767.github.io/Turma-seg-2026/", color: "#ff9800" }] },
      [cite_start]2: { text: "Anatomia: Ci√™ncia estudada formalmente pela primeira vez no Egito (~500 a.C.).[span_0](end_span)" },
      [span_1](start_span)3: { text: "Galeno (S√©c. II-III): Primeiro anatomista, disseca√ß√£o apenas de porcos e macacos.[span_1](end_span)" },
      4: { text: "Andreas Vesalius: Pai da Anatomia Moderna. [span_2](start_span)Disseca√ß√£o de corpos humanos.[span_2](end_span)" },
      [span_3](start_span)5: { text: "Ressurrecionistas: Desenterravam corpos para revenda a estudiosos.[span_3](end_span)" },
      [span_4](start_span)6: { text: "Mortsafes: Grades sobre os t√∫mulos contra roubo de corpos.[span_4](end_span)" },
      [span_5](start_span)8: { text: "Etimologia: Anatomia (Grego 'Anatome' - corte atrav√©s) e Disseca√ß√£o (Latim 'Dis secare' - cortar separado).[span_5](end_span)" },
      [span_6](start_span)9: { text: "Subdivis√µes: Macrosc√≥pica, Microsc√≥pica e do Desenvolvimento.[span_6](end_span)" },
      [span_7](start_span)11: { text: "Hierarquia: √Åtomo, Mol√©cula, Organelas, C√©lula, Tecido, √ìrg√£o e Sistema.[span_7](end_span)" },
      [span_8](start_span)15: { text: "Posi√ß√£o Anat√¥mica: Olhos e p√©s para frente, palmas anteriores, membros pr√≥ximos e paralelos.[span_8](end_span)" },
      [span_9](start_span)18: { text: "Planos: Sagital, Transversal (Mediano).[span_9](end_span)", links: [{ label: "üéÆ Jogos", url: "https://pinheiro767.github.io/Inicio-anato-2026/", color: "#4caf50" }] },
      [span_10](start_span)19: { text: "Plano Mediano: Divide o corpo em lados direito e esquerdo.[span_10](end_span)" },
      [span_11](start_span)21: { text: "Plano Frontal (Coronal): Partes anterior e posterior.[span_11](end_span)" },
      [span_12](start_span)22: { text: "Plano Transverso (Axial): Partes superior e inferior.[span_12](end_span)" },
      [span_13](start_span)23: { text: "Eixos: Linhas imagin√°rias que atravessam planos para os movimentos.[span_13](end_span)" },
      [span_14](start_span)24: { text: "Plano Frontal x Eixo Sagital: Abdu√ß√£o e Adu√ß√£o.[span_14](end_span)" },
      [span_15](start_span)25: { text: "Plano Sagital x Eixo Latero-lateral: Flex√£o e Extens√£o.[span_15](end_span)" },
      [span_16](start_span)26: { text: "Plano Transversal x Eixo Longitudinal: Rota√ß√£o.[span_16](end_span)" },
      [span_17](start_span)27: { text: "Movimentos: Flex√£o, Abdu√ß√£o, Adu√ß√£o, Rota√ß√£o e Circunda√ß√£o.[span_17](end_span)" },
      [span_18](start_span)28: { text: "Import√¢ncia: Mobilidade e preven√ß√£o de les√µes.[span_18](end_span)" },
      [span_19](start_span)29: { text: "Cortes: Longitudinal, Obl√≠quo e Transverso.[span_19](end_span)" },
      [span_20](start_span)32: { text: "Termos: Superior/Cranial, Inferior/Caudal, Anterior/Ventral, Posterior/Dorsal.[span_20](end_span)" },
      33: { text: "Compara√ß√£o: Superficial, Interm√©dio, Profundo. [span_21](start_span)Distal, Medial, Proximal, Lateral.[span_21](end_span)" },
      [span_22](start_span)35: { text: "Anomalia: Altera√ß√£o morfol√≥gica, preju√≠zo funcional, compat√≠vel com a vida.[span_22](end_span)" },
      [span_23](start_span)36: { text: "Monstruosidade: Altera√ß√£o grave, compromete estruturas vitais, incompat√≠vel com a vida.[span_23](end_span)" },
      [span_24](start_span)37: { text: "Hist√≥ria: Freak shows, Julia Pastrana e irm√£os siameses.[span_24](end_span)" }
    };

    function updateUI() {
      document.getElementById('slide-num').innerText = `${currentSlide} / ${totalSlides}`;
      document.getElementById('note-num').innerText = currentSlide;
      document.getElementById('progress-fill').style.width = (currentSlide/totalSlides)*100 + "%";
      const container = document.getElementById('slide-container');
      container.innerHTML = `<img src="assets/slide${currentSlide}.jpg" class="slide-image" onerror="this.parentElement.innerHTML='üìä Slide ${currentSlide}'">`;
      const btnArea = document.getElementById('dynamic-btns');
      btnArea.innerHTML = '';
      if(slideData[currentSlide]?.links) {
        slideData[currentSlide].links.forEach(l => {
          const b = document.createElement('button');
          b.className = 'btn'; b.style.background = l.color; b.innerText = l.label;
          b.onclick = () => window.open(l.url, '_blank');
          btnArea.appendChild(b);
        });
      }
      if(document.getElementById('notes-panel').classList.contains('active')) loadNotes();
    }

    function toggleNotes() { document.getElementById('notes-panel').classList.toggle('active'); loadNotes(); }
    function loadNotes() { document.getElementById('notes-text').value = localStorage.getItem(`note-${currentSlide}`) || ""; }
    
    function extractText() {
      const info = slideData[currentSlide]?.text || `Conte√∫do do Slide ${currentSlide}`;
      const ta = document.getElementById('notes-text');
      ta.value += (ta.value ? "\n\n" : "") + "--- Transcri√ß√£o ---\n" + info;
      localStorage.setItem(`note-${currentSlide}`, ta.value);
    }

    function downloadPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      const txt = document.getElementById('notes-text').value;
      if(!txt) return alert("Notas vazias!");
      doc.setFontSize(16); doc.text(`Anatomia - Slide ${currentSlide}`, 10, 20);
      doc.setFontSize(12); doc.text(txt, 10, 30, { maxWidth: 180 });
      doc.save(`Anatomia_Slide_${currentSlide}.pdf`);
    }

    function clearNotes() { if(confirm("Limpar notas?")) { document.getElementById('notes-text').value = ""; localStorage.removeItem(`note-${currentSlide}`); } }

    function toggleVoice() {
      if(!recognition) {
        const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
        if(!SR) return alert("Sem suporte a voz.");
        recognition = new SR(); recognition.lang = 'pt-BR'; recognition.continuous = true;
        recognition.onresult = (e) => {
          const cmd = e.results[e.results.length-1][0].transcript.toLowerCase();
          if(cmd.includes("pr√≥ximo")) nextSlide();
          if(cmd.includes("anterior")) previousSlide();
        };
      }
      voiceActive ? recognition.stop() : recognition.start();
      voiceActive = !voiceActive;
      document.getElementById('voice-btn').style.background = voiceActive ? "#4caf50" : "#ff9800";
    }

    function nextSlide() { if(currentSlide < totalSlides) { currentSlide++; updateUI(); } }
    function previousSlide() { if(currentSlide > 1) { currentSlide--; updateUI(); } }
    document.addEventListener('keydown', (e) => { if(e.key === "ArrowRight") nextSlide(); if(e.key === "ArrowLeft") previousSlide(); });
    updateUI();
  </script>
</body>
</html>
