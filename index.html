<!doctype html>
<html lang="pt-br" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Apresentador de Anatomia - Prof. Cl√°udia Pinheiro</title>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { height: 100%; width: 100%; }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
      color: #fff;
      overflow: hidden;
    }

    .app-wrapper { display: flex; flex-direction: column; height: 100%; width: 100%; }

    .header {
      background: rgba(48, 43, 99, 0.8);
      padding: 1.2rem;
      border-bottom: 2px solid #64b5f6;
      text-align: center;
    }

    .title {
      font-size: clamp(1.5rem, 4vw, 2.2rem);
      font-weight: 700;
      color: #64b5f6;
      text-shadow: 0 0 15px rgba(100, 181, 246, 0.5);
    }

    .content {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      position: relative;
    }

    .slide-container {
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.2);
      border-radius: 20px;
      border: 2px solid rgba(100, 181, 246, 0.3);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
      overflow: hidden;
      position: relative;
    }

    .slide-image {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
      border-radius: 10px;
      animation: slideIn 0.5s ease-out;
    }

    @keyframes slideIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }

    .controls {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      padding: 1.2rem;
      background: rgba(48, 43, 99, 0.9);
      border-top: 2px solid #64b5f6;
      flex-wrap: wrap;
    }

    .btn {
      background: #42a5f5;
      color: white;
      padding: 0.75rem 1.25rem;
      border-radius: 25px;
      font-weight: bold;
      cursor: pointer;
      border: none;
      transition: 0.3s;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    }

    .btn:hover:not(:disabled) {
      transform: translateY(-3px);
      background: #2196f3;
      box-shadow: 0 6px 20px rgba(100, 181, 246, 0.6);
    }

    .btn:disabled { opacity: 0.5; cursor: not-allowed; }

    .btn-voice-active { background: #4caf50 !important; }
    .btn-voice-inactive { background: #ff9800 !important; }
    .btn-fullscreen { background: #00bcd4 !important; }

    .slide-info { display: flex; align-items: center; gap: 0.5rem; }

    .progress-bar {
      width: 200px;
      height: 8px;
      background: rgba(100, 181, 246, 0.2);
      border-radius: 5px;
      overflow: hidden;
      border: 1px solid rgba(100, 181, 246, 0.4);
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #ffc107, #ff9800);
      width: 0%;
      transition: 0.4s;
    }

    .placeholder {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, rgba(100, 200, 255, 0.1), rgba(255, 100, 200, 0.1));
      border-radius: 12px;
      font-size: 1.2rem;
      color: #a0c4ff;
    }

    .link-buttons {
      position: absolute;
      bottom: 40px;
      left: 0;
      width: 100%;
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      justify-content: center;
      padding: 0 12px;
      pointer-events: none;
    }

    .link-buttons a {
      pointer-events: auto;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
      color: #fff;
      font-weight: 800;
      padding: 12px 18px;
      border-radius: 999px;
      box-shadow: 0 10px 26px rgba(0,0,0,.45);
      border: 1px solid rgba(255,255,255,.18);
      backdrop-filter: blur(10px);
      transition: transform .25s ease, filter .25s ease;
      filter: saturate(1.05);
    }

    .link-buttons a:hover {
      transform: translateY(-2px) scale(1.03);
      filter: saturate(1.2);
    }

    .notes-panel {
      position: fixed;
      right: -420px;
      top: 0;
      width: 420px;
      height: 100%;
      background: rgba(15, 12, 41, 0.95);
      border-left: 2px solid #b366ff;
      transition: 0.4s ease;
      z-index: 1000;
      display: flex;
      flex-direction: column;
      backdrop-filter: blur(20px);
      box-shadow: -8px 0 32px rgba(0, 0, 0, 0.5);
    }

    .notes-panel.active { right: 0; }

    .notes-header {
      padding: 1.5rem;
      border-bottom: 1px solid rgba(100, 181, 246, 0.4);
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(100, 181, 246, 0.1);
    }

    .notes-header h3 { 
      font-size: 1.1rem; 
      color: #64b5f6;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .notes-indicator {
      display: none;
      color: #4caf50;
      font-weight: bold;
      font-size: 0.9rem;
    }

    .notes-indicator.active {
      display: inline;
    }

    .notes-close {
      color: #64b5f6;
      background: none;
      border: none;
      cursor: pointer;
      font-size: 1.5rem;
      transition: 0.2s;
    }

    .notes-close:hover { color: #42a5f5; }

    #notes-text {
      flex: 1;
      background: rgba(15, 12, 41, 0.9);
      color: #fff;
      padding: 1.5rem;
      border: none;
      outline: none;
      resize: none;
      font-size: 0.95rem;
      border-top: 1px solid rgba(100, 181, 246, 0.2);
      font-family: 'Segoe UI', sans-serif;
      line-height: 1.6;
      white-space: pre-wrap;
    }

    #notes-text::placeholder { color: rgba(255, 255, 255, 0.4); }

    .notes-buttons {
      padding: 1.2rem;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      background: rgba(100, 181, 246, 0.05);
      border-top: 1px solid rgba(100, 181, 246, 0.2);
    }

    .notes-btn {
      flex: 1;
      min-width: 110px;
      padding: 0.7rem;
      font-size: 0.8rem;
      border-radius: 20px;
      border: none;
      cursor: pointer;
      font-weight: 700;
      transition: 0.3s;
      color: white;
    }

    .notes-btn-primary { background: #b366ff; }
    .notes-btn-primary:hover { background: #9d4edd; transform: translateY(-2px); }

    .notes-btn-success { background: #4caf50; }
    .notes-btn-success:hover { background: #45a049; transform: translateY(-2px); }

    .notes-btn-danger { background: #f44336; }
    .notes-btn-danger:hover { background: #da190b; transform: translateY(-2px); }

    #voice-status {
      font-weight: 800;
      opacity: .95;
      padding: .3rem .7rem;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.18);
    }

    .keyboard-help {
      display: none;
    }

    @media (max-width: 768px) {
      .notes-panel { width: 80vw; right: -80vw; }
      .controls { gap: 0.8rem; }
      .btn { padding: 0.6rem 1rem; font-size: 0.85rem; }
      .progress-bar { width: 150px; }
      .link-buttons { bottom: 18px; }
      .keyboard-help { display: none; }
    }
  </style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
  <style>body { box-sizing: border-box; }</style>
 </head>
 <body>
  <div class="app-wrapper">
   <div class="header">
    <h1 class="title" id="presentation-title">Introdu√ß√£o √† Anatomia Humana</h1>
   </div>
   <div class="content">
    <div class="slide-container" id="slide-container">
     <div class="placeholder">
      <div style="font-size: 3rem; margin-bottom: 1rem;">
       üìä
      </div>
      <div>
       Carregando slide...
      </div>
     </div>
    </div>
   </div>
   <div class="controls"><button class="btn" id="prev-btn" onclick="previousSlide()">‚Üê Anterior</button>
    <div class="slide-info"><span id="slide-num" style="font-weight:bold;">1 / 37</span>
    </div>
    <div class="progress-bar">
     <div class="progress-fill" id="progress-fill"></div>
    </div><button class="btn" style="background:#9c27b0" onclick="toggleNotes()">üìù Notas (N)</button> <button class="btn btn-voice-inactive" id="voice-btn" onclick="toggleVoice()">üé§ Voz (V)</button> <span id="voice-status">üé§ Voz: desligada</span> <button class="btn" id="link-btn" onclick="openCurrentLink()" style="background:#ff6b6b; display:none;">üìÖ Cronograma (L)</button> <button class="btn btn-fullscreen" onclick="toggleFullscreen()">‚õ∂ Tela Cheia (F)</button> <button class="btn" id="next-btn" onclick="nextSlide()">Pr√≥ximo ‚Üí</button>
   </div>
  </div>
  <div class="notes-panel" id="notes-panel">
   <div class="notes-header">
    <h3>üìù Notas - Slide <span id="note-num">1</span> <span class="notes-indicator" id="notes-indicator">‚úì</span></h3><button class="notes-close" onclick="toggleNotes()">‚úï</button>
   </div><textarea id="notes-text" placeholder="Escreva suas observa√ß√µes ou extraia o texto do slide..."></textarea>
   <div class="notes-buttons"><button class="notes-btn notes-btn-primary" onclick="extractText()">üìÑ Extrair</button> <button class="notes-btn notes-btn-success" onclick="downloadPDF()">üì• PDF</button> <button class="notes-btn notes-btn-danger" onclick="clearNotes()">üóëÔ∏è Limpar</button>
   </div>
  </div>
  <div class="keyboard-help" title="Clique para mais info">
   <h4>‚å®Ô∏è Atalhos</h4>
   <p><kbd>‚Üê</kbd> / <kbd>‚Üí</kbd> <span>Navegar</span></p>
   <p><kbd>1-9</kbd> / <kbd>0</kbd> <span>Ir para slide</span></p>
   <p><kbd>V</kbd> <span>Voz</span></p>
   <p><kbd>N</kbd> <span>Notas</span></p>
   <p><kbd>L</kbd> <span>Link</span></p>
   <p><kbd>F</kbd> <span>Tela Cheia</span></p>
  </div>
  <script>
    let currentSlide = 1;
    const totalSlides = 37;

    let voiceActive = false;
    let recognition = null;

    function normalizeText(s) {
      return (s || "")
        .toLowerCase()
        .normalize("NFD").replace(/[\u0300-\u036f]/g, "")
        .trim();
    }

    function setVoiceUI(active, msg = "") {
      const btn = document.getElementById("voice-btn");
      const status = document.getElementById("voice-status");

      if (active) {
        btn.classList.add("btn-voice-active");
        btn.classList.remove("btn-voice-inactive");
        btn.textContent = "üé§ Ouvindo";
        status.textContent = msg ? `üé§ Voz: ouvindo ‚Äî ${msg}` : "üé§ Voz: ouvindo";
      } else {
        btn.classList.remove("btn-voice-active");
        btn.classList.add("btn-voice-inactive");
        btn.textContent = "üé§ Voz (V)";
        status.textContent = msg ? `üé§ Voz: desligada ‚Äî ${msg}` : "üé§ Voz: desligada";
      }
    }

    function parseSlideNumber(cmd) {
      const m = cmd.match(/\b(\d{1,3})\b/);
      if (m) return parseInt(m[1], 10);

      const map = {
        "um": 1, "uma": 1,
        "dois": 2, "duas": 2,
        "tres": 3,
        "quatro": 4,
        "cinco": 5,
        "seis": 6,
        "sete": 7,
        "oito": 8,
        "nove": 9,
        "dez": 10,
        "onze": 11,
        "doze": 12,
        "treze": 13,
        "quatorze": 14,
        "catorze": 14,
        "quinze": 15,
        "dezesseis": 16,
        "dezessete": 17,
        "dezoito": 18,
        "dezenove": 19,
        "vinte": 20
      };

      for (const [k, v] of Object.entries(map)) {
        if (cmd.includes(` ${k}`) || cmd.endsWith(k)) return v;
      }
      return null;
    }

    function openLinkForSlide(slideNumber, preferLabelIncludes = "") {
      const s = slideData[slideNumber];
      if (!s || !s.links || !s.links.length) return false;

      let link = s.links[0];
      if (preferLabelIncludes) {
        const found = s.links.find(l => normalizeText(l.label).includes(normalizeText(preferLabelIncludes)));
        if (found) link = found;
      }
      window.open(link.url, "_blank", "noopener,noreferrer");
      return true;
    }

    function openCurrentLink() {
      openLinkForSlide(currentSlide);
    }

    function handleVoiceCommand(raw) {
      const cmd = normalizeText(raw);

      if (cmd.includes("proximo") || cmd.includes("avancar") || cmd.includes("seguir")) {
        setVoiceUI(true, "comando: pr√≥ximo");
        nextSlide();
        return;
      }

      if (cmd.includes("anterior") || cmd.includes("voltar") || cmd.includes("retornar")) {
        setVoiceUI(true, "comando: anterior");
        previousSlide();
        return;
      }

      if (cmd.includes("ir para") || cmd.includes("vai para") || cmd.includes("slide") || cmd.includes("pagina")) {
        const n = parseSlideNumber(cmd);
        if (n != null) {
          setVoiceUI(true, `ir para slide ${n}`);
          goToSlide(n);
          return;
        }
      }

      if (cmd.includes("primeiro")) { setVoiceUI(true, "primeiro slide"); goToSlide(1); return; }
      if (cmd.includes("ultimo") || cmd.includes("final")) { setVoiceUI(true, "√∫ltimo slide"); goToSlide(totalSlides); return; }

      if (cmd.includes("abrir notas") || cmd.includes("mostrar notas")) { setVoiceUI(true, "abrir notas"); openNotes(true); return; }
      if (cmd.includes("fechar notas") || cmd.includes("esconder notas")) { setVoiceUI(true, "fechar notas"); openNotes(false); return; }

      if (cmd.includes("extrair") || cmd.includes("transcrever")) { setVoiceUI(true, "extrair texto"); extractText(); return; }
      if (cmd.includes("baixar pdf") || cmd.includes("gerar pdf") || cmd.includes("download pdf")) { setVoiceUI(true, "baixar PDF"); downloadPDF(); return; }
      if (cmd.includes("limpar") || cmd.includes("apagar notas")) { setVoiceUI(true, "limpar notas"); clearNotes(); return; }

      if (cmd.includes("cronograma")) {
        setVoiceUI(true, "abrir cronograma");
        openLinkForSlide(1, "cronograma");
        return;
      }
      if (cmd.includes("teste")) {
        setVoiceUI(true, "abrir teste");
        openLinkForSlide(18, "teste");
        return;
      }
      if (cmd.includes("jogos")) {
        setVoiceUI(true, "abrir jogos");
        openLinkForSlide(18, "jogos");
        return;
      }

      if (cmd.includes("abrir link") || cmd.includes("link")) {
        setVoiceUI(true, "abrir link");
        openCurrentLink();
        return;
      }

      if (cmd.includes("tela cheia") || cmd.includes("fullscreen")) {
        setVoiceUI(true, "ativando tela cheia");
        toggleFullscreen();
        return;
      }

      setVoiceUI(true, `ouvi: "${raw.trim()}" (sem a√ß√£o)`);
    }

    function setupRecognition() {
      const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
      if (!SR) return null;

      const r = new SR();
      r.lang = "pt-BR";
      r.continuous = true;
      r.interimResults = true;

      let lastFinal = "";

      r.onstart = () => setVoiceUI(true);
      r.onerror = (e) => setVoiceUI(voiceActive, `erro: ${e.error || "desconhecido"}`);

      r.onresult = (e) => {
        let interim = "";
        let finalTxt = "";

        for (let i = e.resultIndex; i < e.results.length; i++) {
          const t = e.results[i][0].transcript;
          if (e.results[i].isFinal) finalTxt += t + " ";
          else interim += t + " ";
        }

        if (interim.trim()) setVoiceUI(true, `ouvindo: ${interim.trim()}`);

        const cleanFinal = finalTxt.trim();
        if (cleanFinal && cleanFinal !== lastFinal) {
          lastFinal = cleanFinal;
          handleVoiceCommand(cleanFinal);
        }
      };

      r.onend = () => {
        if (voiceActive) {
          try { r.start(); } catch (_) {}
        } else {
          setVoiceUI(false);
        }
      };

      return r;
    }

    function toggleVoice() {
      if (!recognition) recognition = setupRecognition();
      if (!recognition) { 
        setVoiceUI(false, "navegador n√£o suporta voz");
        return; 
      }

      voiceActive = !voiceActive;

      if (voiceActive) {
        try { recognition.start(); } catch (e) {}
        setVoiceUI(true, "diga: pr√≥ximo, anterior, abrir notas, ir para slide 10...");
      } else {
        try { recognition.stop(); } catch (_) {}
        setVoiceUI(false);
      }
    }

    const slideData = {
      1: {
        text:
`P√°gina 1: Capa
- Texto principal: Introdu√ß√£o a Anatomia humana
- Professora: Claudia Pinheiro
- Conte√∫do adicional: Fragmentos de texto em latim (Lorem Ipsum) e elementos gr√°ficos decorativos.`,
        links: [
          { label: "üìÖ Cronograma", url: "https://pinheiro767.github.io/Turma-seg-2026/", color: "#ff9800" }
        ]
      },
      2: { text: `P√°gina 2: Hist√≥ria Antiga\n- "A anatomia √© uma das mais antigas ci√™ncias m√©dicas b√°sicas: foi estudada formalmente pela primeira vez no Egito (aproximadamente 500 a.C.)".` },
      3: { text: `P√°gina 3: Galeno\n- Galeno viveu nos s√©culos II e III durante o Imp√©rio Romano.\n- √â considerado o primeiro anatomista do mundo.\n- Tinha experi√™ncia apenas em disseca√ß√£o de porcos, macacos e outros animais.` },
      4: { text: `P√°gina 4: Andreas Vesalius\n- Andreas Vesalius (1514-1564) √© considerado o Pai da Anatomia Moderna e um √≠cone da Renascen√ßa.\n- Seus estudos avan√ßaram em rela√ß√£o aos de Galeno por utilizar a disseca√ß√£o de corpos humanos em vez de animais.` },
      5: { text: `P√°gina 5: Ressurrecionistas\n- Conhecidos como ressurrecionistas, pessoas passaram s√©culos desenterrando corpos de t√∫mulos para revend√™-los a estudiosos.` },
      6: { text: `P√°gina 6: Prote√ß√£o de T√∫mulos\n- Mortsafes: Grades colocadas sobre os t√∫mulos para evitar o roubo de corpos.` },
      7: { text: `P√°gina 7: William Burke e William Hare\n- William Hare e sua esposa administravam uma pens√£o em Edimburgo onde William Burke morava.\n- Tornaram-se uma dupla que eliminava v√≠timas para lucrar com a venda dos corpos.` },
      8: { text: `P√°gina 8: Etimologia\n- Anatomia: Do grego anatome ("corte atrav√©s de").\n- Disseca√ß√£o: Do latim dis secare ("cortar separado").` },
      9: { text: `P√°gina 9: Subdivis√µes Anat√¥micas\n- Anatomia Macrosc√≥pica.\n- Anatomia Microsc√≥pica.\n- Anatomia do Desenvolvimento.` },
      10:{ text: `P√°gina 10: Organiza√ß√£o\n- N√≠veis de Organiza√ß√£o e Sistemas do Corpo.` },
      11:{ text: `P√°gina 11: Ilustra√ß√£o de N√≠veis\n- Representa√ß√£o visual em hex√°gonos: √Åtomo, Mol√©cula, Tecido, C√©lula (Organelas), Cora√ß√£o (√ìrg√£o) e Sistema.` },
      12:{ text: `P√°gina 12: M√©todos de Estudo\n- Anatomia regional.\n- Anatomia sist√™mica.\n- Anatomia cl√≠nica.\n- Termos isolados: Tecido, √ìrg√£o.` },
      13:{ text: `P√°gina 13: Formas de Estudo\n- Disseca√ß√£o.\n- Imagens.\n- Modelos.\n- Apalpa√ß√£o.\n- Ausculta√ß√£o.` },
      14:{ text: `P√°gina 14: Considera√ß√µes Anat√¥micas\n- Divis√£o do corpo humano.\n- Posi√ß√£o Anat√¥mica.` },
      15:{ text: `P√°gina 15: Posi√ß√£o Anat√¥mica (Padr√µes)\n1) A cabe√ßa, os olhos e os dedos dos p√©s voltados anteriormente (para frente).\n2) Os bra√ßos ao lado do corpo, com as palmas voltadas anteriormente.\n3) Os membros inferiores pr√≥ximos, com os p√©s paralelos.` },
      16:{ text: `P√°gina 16: Termos de Movimento\n- Introdu√ß√£o aos termos de movimento.` },
      17:{ text: `P√°gina 17: Planos e Eixos\n- Os movimentos do corpo humano ocorrem em planos e eixos espec√≠ficos, envolvendo a intera√ß√£o entre ossos, m√∫sculos e articula√ß√µes.` },
      18:{
        text:`P√°gina 18: Planos Anat√¥micos\n- Indica√ß√£o de Plano Transversal (Mediano) e Plano Sagital.`,
        links:[
          { label:"üéÆ Jogos", url:"https://pinheiro767.github.io/Inicio-anato-2026/", color:"#4caf50" },
          { label:"üß™ Teste os conhecimentos", url:"https://pinheiro767.github.io/Inicio-anato-2026/", color:"#b366ff" }
        ]
      },
      19:{ text:`P√°gina 19: Plano Mediano\n- O plano mediano divide o corpo humano em lados direito e esquerdo.` },
      20:{ text:`P√°gina 20: Plano Sagital\n- Divide o corpo em duas partes assim√©tricas.` },
      21:{ text:`P√°gina 21: Plano Frontal\n- Tamb√©m chamado de Coronal, divide o corpo em partes anterior e posterior.` },
      22:{ text:`P√°gina 22: Plano Transverso\n- Tamb√©m chamado de Axial, divide o corpo em partes superior e inferior.` },
      23:{ text:`P√°gina 23: Eixos do Corpo Humano\n- Linhas imagin√°rias que atravessam planos paralelos em torno das quais ocorrem os movimentos.` },
      24:{ text:`P√°gina 24: Plano Frontal x Eixo Sagital\n- Movimentos de Abdu√ß√£o e Adu√ß√£o ocorrem em planos frontais em torno de um eixo √¢ntero-posterior.` },
      25:{ text:`P√°gina 25: Plano Sagital x Eixo L√°tero-lateral\n- Os movimentos de Flex√£o e Extens√£o geralmente ocorrem em planos sagitais em torno de um eixo transverso.` },
      26:{ text:`P√°gina 26: Plano Transversal x Eixo Longitudinal\n- Os movimentos de Rota√ß√£o ocorrem no plano transversal e acontecem em torno do eixo longitudinal.` },
      27:{ text:`P√°gina 27: Descri√ß√£o de Movimentos\n- Flex√£o: Diminui o √¢ngulo entre segmentos.\n- Abdu√ß√£o e Adu√ß√£o: Afasta e aproxima parte do corpo √† linha m√©dia.\n- Rota√ß√£o: Gira uma parte em torno de um eixo.\n- Circunda√ß√£o: Movimento circular que combina flex√£o, abdu√ß√£o e adu√ß√£o.` },
      28:{ text:`P√°gina 28: Import√¢ncia dos Movimentos\n- Compreender esses movimentos √© fundamental para profissionais da sa√∫de e do esporte para mobilidade e preven√ß√£o de les√µes.` },
      29:{ text:`P√°gina 29: Cortes Anat√¥micos\n- O principal uso dos planos √© descrever cortes:\n  ‚Ä¢ Corte Longitudinal\n  ‚Ä¢ Corte Obl√≠quo\n  ‚Ä¢ Corte Transverso` },
      30:{ text:`P√°gina 30: Revis√£o de Planos\n- Ilustra√ß√µes dos planos Sagital e Transversal.` },
      31:{ text:`P√°gina 31: Terminologia Anat√¥mica\n- In√≠cio da se√ß√£o sobre Terminologia Anat√¥mica e Posi√ß√£o Anat√¥mica.` },
      32:{ text:`P√°gina 32: Termos de Rela√ß√£o e Compara√ß√£o (Parte 1)\n- Superior (Cranial): Mais pr√≥ximo da cabe√ßa.\n- Inferior (Caudal): Mais pr√≥ximo dos p√©s.\n- Anterior (Ventral): Mais pr√≥ximo da frente do corpo.\n- Posterior (Dorsal): Mais pr√≥ximo das costas.\n- Palmar vs Dorsal (m√£o) e Plantar vs Dorsal (p√©).\n- Superficial, Intermedi√°rio e Profundo.\n- Medial: Mais pr√≥ximo do plano mediano.\n- Lateral: Mais distante do plano mediano.` },
      33:{ text:`P√°gina 33: Termos de Rela√ß√£o e Compara√ß√£o (Parte 2)\n- Diagramas exemplificando: Superficial, Interm√©dio, Profundo, Distal, Medial, Proximal e Lateral.` },
      34:{ text:`P√°gina 34: Conceito: Normal\n- Refere-se √†s caracter√≠sticas anat√¥micas presentes na maioria da popula√ß√£o, consideradas mais frequentes.` },
      35:{ text:`P√°gina 35: Conceito: Anomalia\n- Altera√ß√£o morfol√≥gica que difere do normal e traz preju√≠zo √† fun√ß√£o, mas √© compat√≠vel com a vida (ex: polidactilia).` },
      36:{ text:`P√°gina 36: Conceito: Monstruosidade\n- Altera√ß√£o morfol√≥gica grave que compromete estruturas vitais e gera preju√≠zo funcional severo, sendo incompat√≠vel com a vida.\n- Tabela comparativa:\n  ‚Ä¢ Normal: Compat√≠vel com a vida; Sem preju√≠zo funcional.\n  ‚Ä¢ Anomalia: Compat√≠vel com a vida; Pode haver preju√≠zo funcional.\n  ‚Ä¢ Monstruosidade: N√£o compat√≠vel com a vida; Preju√≠zo funcional grave.` },
      37:{ text:`P√°gina 37: Freak Shows Hist√≥ricos\n- Cartaz do s√©culo XIX sobre Julia Pastrana e o "Double-Bodied Boy".\n- Menciona a exposi√ß√£o de irm√£os siameses e meninos parasitas em "freak shows".` }
    };

    function updateUI() {
      document.getElementById('slide-num').innerText = `${currentSlide} / ${totalSlides}`;
      document.getElementById('note-num').innerText = currentSlide;
      document.getElementById('progress-fill').style.width = (currentSlide / totalSlides) * 100 + "%";

      const s = slideData[currentSlide];
      const linkBtn = document.getElementById('link-btn');
      if (s && s.links && s.links.length) {
        linkBtn.style.display = 'block';
      } else {
        linkBtn.style.display = 'none';
      }

      const container = document.getElementById('slide-container');

      let html = `
        <img src="assets/slide${currentSlide}.jpg"
             class="slide-image"
             alt="Slide ${currentSlide}"
             loading="lazy"
             onerror="this.parentElement.innerHTML='<div class=\\'placeholder\\'><div style=\\'font-size:2rem;margin-bottom:1rem;\\'>üìä</div><div>Slide ${currentSlide}</div></div>'">
      `;

      if (s && s.links && s.links.length) {
        html += `<div class="link-buttons">`;
        s.links.forEach(link => {
          html += `
            <a href="${link.url}" target="_blank" rel="noopener noreferrer"
               style="background:${link.color};">
              ${link.label}
            </a>
          `;
        });
        html += `</div>`;
      }

      container.innerHTML = html;

      document.getElementById('prev-btn').disabled = currentSlide === 1;
      document.getElementById('next-btn').disabled = currentSlide === totalSlides;

      if (document.getElementById('notes-panel').classList.contains('active')) loadNotes();
      updateNotesIndicator();
    }

    function updateNotesIndicator() {
      const indicator = document.getElementById('notes-indicator');
      const notes = localStorage.getItem(`note-${currentSlide}`);
      if (notes && notes.trim()) {
        indicator.classList.add('active');
      } else {
        indicator.classList.remove('active');
      }
    }

    function nextSlide() { if (currentSlide < totalSlides) { currentSlide++; updateUI(); } }
    function previousSlide() { if (currentSlide > 1) { currentSlide--; updateUI(); } }

    function toggleNotes() {
      document.getElementById('notes-panel').classList.toggle('active');
      if (document.getElementById('notes-panel').classList.contains('active')) loadNotes();
    }

    function openNotes(open) {
      const panel = document.getElementById('notes-panel');
      if (open) panel.classList.add('active');
      else panel.classList.remove('active');
      if (panel.classList.contains('active')) loadNotes();
    }

    function loadNotes() {
      document.getElementById('notes-text').value = localStorage.getItem(`note-${currentSlide}`) || "";
      updateNotesIndicator();
    }

    function saveNotes() {
      localStorage.setItem(`note-${currentSlide}`, document.getElementById('notes-text').value);
      updateNotesIndicator();
    }

    function extractText() {
      const info = slideData[currentSlide]?.text || `Conte√∫do do Slide ${currentSlide}`;
      const ta = document.getElementById('notes-text');
      ta.value += (ta.value ? "\n\n" : "") + `--- TRANSCRI√á√ÉO SLIDE ${currentSlide} ---\n` + info;
      saveNotes();
    }

    function clearNotes() {
      const confirmed = confirm("Tem certeza que deseja limpar as notas deste slide?");
      if (confirmed) {
        document.getElementById('notes-text').value = "";
        localStorage.removeItem(`note-${currentSlide}`);
        updateNotesIndicator();
      }
    }

    function downloadPDF() {
      const { jsPDF } = window.jspdf;
      const txt = document.getElementById('notes-text').value;

      if (!txt.trim()) {
        alert("Notas vazias! Escreva algo antes de baixar.");
        return;
      }

      const doc = new jsPDF({ unit: "mm", format: "a4" });
      const margin = 12;
      const pageWidth = doc.internal.pageSize.getWidth();
      const pageHeight = doc.internal.pageSize.getHeight();
      const maxWidth = pageWidth - margin * 2;
      const lineHeight = 6;

      doc.setFont("helvetica", "bold");
      doc.setFontSize(14);
      doc.text(`Aula de Anatomia ‚Äî Slide ${currentSlide}`, margin, 16);

      doc.setFont("helvetica", "normal");
      doc.setFontSize(11);

      const lines = doc.splitTextToSize(txt, maxWidth);

      let y = 26;
      for (let i = 0; i < lines.length; i++) {
        if (y > pageHeight - margin) {
          doc.addPage();
          y = margin;
        }
        doc.text(lines[i], margin, y);
        y += lineHeight;
      }

      doc.save(`Aula_Anatomia_Slide_${currentSlide}.pdf`);
    }

    function toggleFullscreen() {
      const doc = document.documentElement;
      if (!document.fullscreenElement) {
        doc.requestFullscreen().catch(err => console.log("Fullscreen error:", err.message));
      } else {
        document.exitFullscreen().catch(err => console.log("Exit fullscreen error:", err.message));
      }
    }

    document.addEventListener('keydown', (e) => {
      if (e.key === "ArrowRight") nextSlide();
      if (e.key === "ArrowLeft") previousSlide();
      if (e.key === "Escape") {
        const p = document.getElementById('notes-panel');
        if (p.classList.contains('active')) p.classList.remove('active');
      }

      if (/^[0-9]$/.test(e.key)) {
        let slideNum = parseInt(e.key, 10);
        if (e.key === "0") slideNum = 10;
        goToSlide(slideNum);
      }

      if (e.key.toLowerCase() === "v" && !e.ctrlKey && !e.metaKey) {
        e.preventDefault();
        toggleVoice();
      }

      if (e.key.toLowerCase() === "l" && !e.ctrlKey && !e.metaKey) {
        e.preventDefault();
        openCurrentLink();
      }

      if (e.key.toLowerCase() === "n" && !e.ctrlKey && !e.metaKey) {
        e.preventDefault();
        toggleNotes();
      }

      if (e.key.toLowerCase() === "f" && !e.ctrlKey && !e.metaKey) {
        e.preventDefault();
        toggleFullscreen();
      }
    });

    document.getElementById('notes-text').addEventListener('input', saveNotes);

    function goToSlide(n) {
      const clamped = Math.min(totalSlides, Math.max(1, Number(n)));
      currentSlide = clamped;
      updateUI();
    }

    updateUI();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9d268cb8643d32a9',t:'MTc3MTg0Nzg4OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
